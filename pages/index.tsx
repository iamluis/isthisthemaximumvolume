import type { NextPage } from 'next'
import Head from 'next/head'
import Link from 'next/link'
import Confetti from 'react-confetti'
import styles from '../styles/Home.module.css'
import { useMouse, useInterval } from 'react-use'
import { useRef, useState } from 'react'


const MouseConfetti = () => {
  const ref = useRef(null)
  const { docX } = useMouse(ref)
  const activeProps = docX ? {
    confettiSource: {
      w: 0,
      h: 0,
      x: docX,
      y: 0,
    },
  } : {
    run: false,
  }
  return (<div style={{ width: "100%" }}>
    <Confetti
      numberOfPieces={100}
      initialVelocityX={2}
      initialVelocityY={5}
      ref={ref}
      gravity={0.1}
      {...activeProps}
    />
  </div>)
}

const happyBirthday = "Happy Birthday Alexy!";

const Home: NextPage = () => {
  const [message, setMessage] = useState("");
  const messageShowing = message.length === happyBirthday.length;
  useInterval(() => {
    setMessage(happyBirthday.substring(0, message.length + 1))
  }, messageShowing ? null : 100);

  return (
    <div className={`${styles.container} fun-background default-background`}>
      <MouseConfetti></MouseConfetti>
      <Head>
        <title>Maximum Volu.me</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <div className={styles.content}>
        <p className={`${styles.line1}`}>
          {message}<span className={styles.carret} hidden={messageShowing}>|</span>
        </p>
        <div className={styles.links}>
          <Link href="/story/Coloc" passHref>
            <span className={styles.link}>
              Give me photos!
            </span>
          </Link>
          <Link href="music" passHref>
            <span className={styles.link}>
              Give me music!
            </span>
          </Link>
        </div>
      </div>
    </div>
  )
}

export default Home
